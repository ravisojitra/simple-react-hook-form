{"version":3,"sources":["../../src/index.js","schema.js","App.js","index.js"],"names":["reducer","state","type","payload","inputKey","inputValue","values","touched","errors","isSubmitted","submitCounter","defaultConfig","validate","validationOnChange","validateSchema","initialValues","config","initalState","getInitialState","useReducer","dispatch","React","validateForm","checkForm","onSubmit","getValidationErrors","isValid","Promise","resolve","abortEarly","err","yupErr","handleChange","useCallback","key","value","resetForm","clearForm","oldValues","Object","handleSubmit","registerSchema","yup","shape","name","min","required","email","title","oneOf","website","url","Input","label","placeholder","onChange","error","htmlFor","e","currentTarget","className","join","TitleInput","target","App","useMemo","useForm","console","log","onClick","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e4f0076f.chunk.js","sourcesContent":["import React, { useReducer, useCallback } from 'react'\n\nconst getInitialState = initialValues => {\n  return {\n    values: {\n      ...initialValues\n    },\n    errors: {}, // all errors\n    touched: {}, // dirty field names\n    isSubmitted: false, //is form submitted to check validation\n    submitCounter: 0\n  }\n}\n\nconst reducer = (state, { type, payload }) => {\n  switch (type) {\n    case 'INPUT_CHANGE':\n      let inputKey = payload.key, inputValue = payload.value;\n      return {\n        ...state,\n        values: { ...state.values, [inputKey]: inputValue },\n        touched: { ...state.touched, [inputKey]: true }\n      }\n    case 'VALIDATE_FORM':\n      let errors = payload.errors || {}\n      return {\n        ...state,\n        errors\n      }\n    case 'RESET_FORM':\n      return { ...payload, errors: {} }\n    case 'SUBMIT_FORM':\n      return { ...state, isSubmitted: true, submitCounter: ++state.submitCounter }\n    case 'CLEAR_FORM':\n      return { ...state, values: { ...payload.values }, errors: {} }\n    default:\n      return state;\n  }\n}\n\nconst defaultConfig = {\n  validate: true, //should validate form?\n  validationOnChange: false, //should form validate on blur input\n  validateSchema: false //yup validation schema\n}\n\nconst useForm = (initialValues = {}, config = { ...defaultConfig }) => {\n  let initalState = getInitialState(initialValues);\n  const [state, dispatch] = useReducer(reducer, initalState);\n  const { validate, validationOnChange, validateSchema } = config;\n\n  React.useEffect(() => {\n    async function checkForm() {\n      await validateForm();\n    }\n    if (validationOnChange && state.isSubmitted) {\n      checkForm();\n    }\n  }, [state.values, validationOnChange])\n\n  React.useEffect(() => {\n    async function checkForm() {\n      if (await validateForm()) {\n        onSubmit();\n      }\n    }\n\n    state.isSubmitted && checkForm()\n  }, [state.submitCounter, state.isSubmitted])\n\n  const validateForm = async () => {\n    let { isValid, errors } = await getValidationErrors();\n    dispatch({ type: 'VALIDATE_FORM', payload: { errors } });\n    return isValid;\n  }\n\n  const getValidationErrors = () => {\n    return new Promise((resolve, _) => {\n      if (validateSchema) {\n        try {\n          let isValid = validateSchema.validateSync(state.values, { abortEarly: false });\n          resolve({ isValid, errors: {} })\n        } catch (err) {\n          let errors = {};\n          err.inner.forEach((yupErr) => {\n            if (errors[yupErr.path]) {\n              errors[yupErr.path].push(yupErr.message);\n            } else {\n              errors[yupErr.path] = [yupErr.message];\n            }\n          });\n          resolve({ isValid: false, errors })\n        }\n      } else {\n        resolve({ isValid: true, errors: {} })\n      }\n    })\n  }\n\n  const handleChange = useCallback(async (key, value) => {\n    dispatch({\n      type: 'INPUT_CHANGE',\n      payload: { key, value }\n    });\n  })\n\n  const resetForm = useCallback(() => {\n    dispatch({\n      type: 'RESET_FORM',\n      payload: {\n        ...initalState\n      }\n    })\n  }, [initalState]);\n\n  const clearForm = useCallback(() => {\n    let oldValues = { ...state.values }\n    let values = Object.keys(oldValues).forEach(function (key) { oldValues[key] = \"\" });\n    dispatch({\n      type: 'CLEAR_FORM',\n      payload: {\n        ...values\n      }\n    })\n  })\n\n  const handleSubmit = useCallback(async (onSubmit) => {\n    if (validate) {\n      dispatch({ type: 'SUBMIT_FORM' })\n      // if (await validateForm()) {\n      //   onSubmit();\n      // }\n    } else {\n      onSubmit();\n    }\n  });\n\n  return { handleChange, resetForm, handleSubmit, clearForm, ...state }\n}\n\nexport default useForm;","import * as yup from 'yup';\n\nconst registerSchema = yup.object().shape({\n    name: yup\n        .string()\n        .min(5, 'Name must be minimum of length 5')\n        .required('Name is required'),\n    email: yup\n        .string()\n        .email('Please enter valid email')\n        .required('Email is required'),\n    title: yup\n        .string()\n        .oneOf(['Mr', 'Mrs', 'Miss'],\"Please Select Title\")\n        .required(),\n    website: yup\n        .string()\n        .url(\"Please enter valid url\")\n        .required('Website is required.')\n})\n\nexport { registerSchema }","import React, { useMemo } from 'react'\nimport useForm from 'simple-react-hook-form';\nimport { registerSchema } from './schema'\nimport './index.css'\n\nconst Input = ({ label, placeholder, type = 'text', onChange, value = '', error }) => {\n  return (\n    <div>\n      <label htmlFor={label}>{label}</label>\n      <input\n        onChange={(e) => onChange && onChange(e.currentTarget.value)}\n        name={label}\n        placeholder={placeholder}\n        type={type}\n        value={value}\n      />\n      {\n        error &&\n        <p className='errorText'>{error.join(\"\\n\")}</p>\n      }\n    </div>\n  )\n}\n\nconst TitleInput = ({ label, onChange, value = '', error }) => {\n  return (\n    <div>\n      <label>{label}</label>\n      <select name=\"title\" value={value} onChange={(e) => onChange && onChange(e.target.value)}>\n        <option value=\"\">Select {label}</option>\n        <option value=\"Mr\">Mr</option>\n        <option value=\"Mrs\">Mrs</option>\n        <option value=\"Miss\">Miss</option>\n      </select>\n      {\n        error &&\n        <p className='errorText'>{error.join(\"\\n\")}</p>\n      }\n    </div>\n\n  )\n}\n\nconst App = () => {\n\n  const initialValues = useMemo(() => {\n    return {\n      name: 'Ravi',\n      email: '',\n      title: '',\n      website: ''\n    }\n  });\n\n  const { handleChange, resetForm, clearForm, values, handleSubmit, errors } = useForm(\n    initialValues,\n    {\n      validate: true,\n      validateSchema: registerSchema,\n      validationOnChange: true\n    }\n  );\n\n  const onSubmit = () => {\n    console.log(\"form is valid, Do what you gotta do!\");\n  }\n\n  return (\n    <div className=\"App\">\n      <form >\n\n        <Input\n          label={'Full Name'}\n          placeholder={'Ravi Sojitra'}\n          onChange={(value) => handleChange('name', value)}\n          value={values.name}\n          error={errors.name}\n        />\n\n        <Input\n          label={'Email'}\n          placeholder={'ravisojitra79@gmail.com'}\n          onChange={(value) => handleChange('email', value)}\n          value={values.email}\n          error={errors.email}\n        />\n\n        <Input\n          label={'Website'}\n          placeholder={'Your Website'}\n          onChange={(value) => handleChange('website', value)}\n          value={values.website}\n          error={errors.website}\n        />\n\n        <TitleInput\n          label={'Title'}\n          onChange={(value) => handleChange('title', value)}\n          value={values.title}\n          error={errors.title}\n        />\n\n        <div className=\"buttonContainer\">\n          <button type=\"reset\" onClick={clearForm}>Clear</button>\n          <button type=\"reset\" onClick={resetForm}>Reset Default</button>\n          <button type=\"button\" className='submitButton' onClick={() => handleSubmit(onSubmit)} >Submit</button>\n        </div>\n\n      </form>\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}